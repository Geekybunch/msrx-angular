<div class="flex flex-col flex-auto min-w-0">
    <div class="flex-auto p-6 sm:p-10">
        <div class="max-w-3xl">
            <form
                [formGroup]="dileveryForm"
                class="flex flex-col p-10 bg-card rounded-xl shadow overflow-hidden"
            >
                <div
                    class="flex flex-col sm:flex-row items-center justify-between mb-8"
                >
                    <div
                        class="text-xl font-medium tracking-tight leading-6 truncate"
                    >
                        Create Disposal Record
                    </div>
                </div>
                <div class="flex flex-row gt-md:flex-col mb-5">
                    <mat-chip *ngFor="let material of materials; let i = index">
                        {{ materialIDs[i].slice(1, 8) }}...
                        <button
                            matChipRemove
                            (click)="this.materials.splice(i, 1)"
                        >
                            <mat-icon>cancel</mat-icon>
                        </button>
                    </mat-chip>

                    <button
                        (click)="showScanMenu()"
                        class="scan_btn bg-primary-500 text-white rounded-full w-auto"
                    >
                        Scan Plants
                    </button>
                </div>

                <div class="flex flex-row gt-xs:flex-row">
                    <mat-form-field class="flex-auto gt-xs:pr-3 fuse-mat-dense">
                        <mat-label>Picked Up From</mat-label>
                        <textarea
                            matInput
                            [formControlName]="'fromBusiness'"
                            (click)="openBusinessSearch()"
                        ></textarea>
                    </mat-form-field>
                </div>

                <div class="flex flex-col gt-md:flex-col"></div>
                <div class="flex flex-col gt-md:flex-col">
                    <mat-form-field
                        class="fuse-mat-textarea flex-auto fuse-mat-dense"
                    >
                        <mat-label> PickUp Location</mat-label>
                        <textarea
                            matInput
                            [formControlName]="'pickUpLocation'"
                        ></textarea>
                    </mat-form-field>
                </div>
                <div class="flex flex-row gt-md:flex-row">
                    <mat-form-field class="flex-auto fuse-mat-dense">
                        <mat-label> Delivery Vehicle</mat-label>
                        <input matInput [formControlName]="'vehicleCtrl'" />
                    </mat-form-field>
                    <mat-form-field class="flex-auto fuse-mat-dense ml-6">
                        <mat-label> Pickup Time</mat-label>
                        <input
                            matInput
                            [matDatepicker]="picker1"
                            [formControlName]="'pickUpDateTime'"
                        />
                        <mat-datepicker-toggle
                            matSuffix
                            [for]="picker1"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>

                <div class="flex flex-col gt-md:flex-row mt-3">
                    <button
                        (click)="addDelivery()"
                        class="max-w-50"
                        mat-raised-button
                        color="primary"
                    >
                        Add Disposal
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<ng-template #scanQRCodeDialog>
    <div class="p-3" style="width: 22rem !important" *ngIf="!quantityDialog">
        <h2 matDialogTitle>Scan QR Code</h2>
        <form class="mb-3">
            <div class="flex flex-col">
                <mat-form-field class="flex-auto fuse-mat-dense">
                    <input
                        matInput
                        name="plantId"
                        [(ngModel)]="plantID"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="Enter Plant ID"
                    />
                </mat-form-field>
            </div>

            <div class="flex flex-col">
                <button
                    class="flex items-center justify-center rounded"
                    style="border: 1px dashed rgb(203 213 225); padding: 10px"
                >
                    <mat-icon
                        svgIcon="qr_code_scanner"
                        class="mat-icon notranslate icon-size-5 mr-3 mat-icon-no-color"
                    ></mat-icon>
                    Scan QR Code
                </button>
            </div>
        </form>
        <mat-dialog-actions>
            <button
                (click)="plantDetails()"
                mat-button
                mat-raised-button
                color="primary"
                class="px-8"
            >
                Done
            </button>
            <button mat-button (click)="matClose()">Cancel</button>
        </mat-dialog-actions>
    </div>
    <div class="p-3" style="width: 22rem !important" *ngIf="quantityDialog">
        <h2 matDialogTitle>Enter Quantity</h2>
        <form class="mb-3">
            <div class="flex flex-col">
                <mat-form-field
                    [ngClass]="formFieldHelpers"
                    class="flex-auto fuse-mat-dense"
                >
                    <input
                        [(ngModel)]="quantity"
                        name="quantity"
                        type="number"
                        matInput
                        placeholder="Quantity Received"
                    />
                </mat-form-field>
            </div>
        </form>
        <mat-dialog-actions>
            <button
                (click)="addMaterial()"
                mat-button
                mat-raised-button
                color="primary"
                class="px-8"
            >
                Done
            </button>
            <button mat-button (click)="matClose()">Cancel</button>
        </mat-dialog-actions>
    </div>
</ng-template>
